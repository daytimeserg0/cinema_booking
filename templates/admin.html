<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel - Cinema Booking</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='admin.css') }}">
</head>
<body>
    <h1>Admin Panel</h1>
    <p>Welcome, {{ session.username }}!</p>
    <p><a href="/">Back to Home</a></p>


    <!-- Add New Hall Form -->
    <h2>Add New Hall</h2>
    <style>
      .message.success { color: green; font-weight: bold; }
      .message.error { color: red; font-weight: bold; }
    </style>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, msg in messages %}
          <div class="message {{ category }}">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    <form method="POST">
        <input type="text" name="name" placeholder="Hall Name" required><br>
        <input type="number" name="rows" placeholder="Number of Rows" min="1" required><br>
        <input type="number" name="seats_per_row" placeholder="Seats per Row" min="1" required><br><br>
        <button type="submit" name="add_hall" class="add_hall">Add Hall</button>
    </form>

    <!-- List of existing halls -->
    <h2>Existing Halls</h2>
      {% if halls %}
          <table>
              <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Rows</th>
                  <th>Seats per Row</th>
                  <th>Action</th>
              </tr>
              {% for hall in halls %}
              <tr>
                  <td>{{ hall[0] }}</td>
                  <td>{{ hall[1] }}</td>
                  <td>{{ hall[2] }}</td>
                  <td>{{ hall[3] }}</td>
                  <td>
                      <form method="POST" style="display:inline;">
                          <button type="submit" name="delete_hall" class="delete_hall" value="{{ hall[0] }}" onclick="return confirm('Are you sure you want to delete this hall?');">
                              Delete
                          </button>
                      </form>
                  </td>
              </tr>
              {% endfor %}
          </table>
      {% else %}
          <p>No halls available.</p>
      {% endif %}

</body>
</html>
